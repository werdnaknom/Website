{"version":3,"sources":["pages/user-settings-demo.js"],"names":["ProfileSettingsDemo","_classCallCheck","this","init","handleFileUploadAvatar","$container","$","parents","$avatarWarningContainer","addClass","closeBtn","fileupload","url","dropZone","dataType","autoUpload","acceptFileTypes","maxFileSize","on","e","data","index","file","files","remove","error","text","prepend","progress","parseInt","loaded","total","children","css","result","$img","parent","prop","removeClass","document"],"mappings":"uZAGMA,+BAEJ,SAAAA,IAAeC,gBAAAC,KAAAF,GAEbE,KAAKC,2DAOLD,KAAKE,0EAKL,IAEMC,EAAaC,EAAE,sBAAsBC,QAAQ,cAC7CC,EAA0BF,EAAE,SAC/BG,SAAS,wCACNC,EAAQ,iJAKdJ,EAAE,sBAAsBK,WAAW,CACjCC,IAXU,oCAYVC,SAAU,KACVC,SAAU,OACVC,YAAY,EACZC,gBAAiB,2BACjBC,YAAa,MAEdC,GAAG,0BAA2B,SAAUC,EAAGC,GAC1C,IAAMC,EAAQD,EAAKC,MACbC,EAAOF,EAAKG,MAAMF,GAExBb,EAAwBgB,SAEpBF,EAAKG,QACPjB,EACGkB,KAAKJ,EAAKG,OACVE,QAAQjB,GACXL,EAAWsB,QAAQnB,MAGtBU,GAAG,wBAAyB,SAAUC,EAAGC,GACxC,IAAMQ,EAAWC,SAAST,EAAKU,OAASV,EAAKW,MAAQ,IAAK,IAE1DzB,EAAE,oBAAoBG,SAAS,QAC5BuB,WACAC,IAAI,QAASL,EAAW,OAE5BV,GAAG,iBAAkB,SAAUC,EAAGC,GACjC,IAAME,EAAOF,EAAKc,OAAOX,MAAM,GACzBY,EAAO7B,EAAEJ,MAAMkC,SAASJ,SAAS,OAC1BG,EAAKE,KAAK,OAEnBf,EAAKV,IACPuB,EAAKE,KAAK,MAAOf,EAAKV,KAGbU,EAAKG,QACdjB,EACGkB,KAAKJ,EAAKG,OACVE,QAAQjB,GACXL,EAAWsB,QAAQnB,IAGrBF,EAAE,oBAAoBgC,YAAY,QAC/BN,WACAC,IAAI,QAAS,cAUtB3B,EAAEiC,UAAUrB,GAAG,aAAc,WAC3B,IAAIlB","file":"../../javascript/pages/user-settings-demo.min.js","sourcesContent":["// Profile Settings Demo\n// =============================================================\n\nclass ProfileSettingsDemo {\n\n  constructor () {\n\n    this.init()\n\n  }\n\n  init () {\n\n    // event handlers\n    this.handleFileUploadAvatar()\n  }\n\n  handleFileUploadAvatar () {\n    // Change this to the location of your server-side upload handler:\n    const url = '//jquery-file-upload.appspot.com/'\n    // const url = (window.location.hostname === 'blueimp.github.io') ? '//jquery-file-upload.appspot.com/' : 'server/php/'\n    const $container = $('#fileupload-avatar').parents('.card-body')\n    const $avatarWarningContainer = $('<div>')\n      .addClass('alert alert-danger alert-dismissible')\n    const closeBtn = `<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n        <span aria-hidden=\"true\">&times;</span>\n      </button>`\n\n    // file upload avatar\n    $('#fileupload-avatar').fileupload({\n      url: url,\n      dropZone: null,\n      dataType: 'json',\n      autoUpload: true,\n      acceptFileTypes: /(\\.|\\/)(gif|jpe?g|png)$/i,\n      maxFileSize: 2000000\n    })\n    .on('fileuploadprocessalways', function (e, data) {\n      const index = data.index\n      const file = data.files[index]\n\n      $avatarWarningContainer.remove()\n\n      if (file.error) {\n        $avatarWarningContainer\n          .text(file.error)\n          .prepend(closeBtn)\n        $container.prepend($avatarWarningContainer)\n      }\n    })\n    .on('fileuploadprogressall', function (e, data) {\n      const progress = parseInt(data.loaded / data.total * 100, 10)\n\n      $('#progress-avatar').addClass('show')\n        .children()\n        .css('width', progress + '%')\n    })\n    .on('fileuploaddone', function (e, data) {\n      const file = data.result.files[0]\n      const $img = $(this).parent().children('img')\n      const $old = $img.prop('src')\n\n      if (file.url) {\n        $img.prop('src', file.url)\n\n        // update your db\n      } else if (file.error) {\n        $avatarWarningContainer\n          .text(file.error)\n          .prepend(closeBtn)\n        $container.prepend($avatarWarningContainer)\n      }\n\n      $('#progress-avatar').removeClass('show')\n        .children()\n        .css('width', 0)\n    })\n  }\n}\n\n\n/**\n * Keep in mind that your scripts may not always be executed after the theme is completely ready,\n * you might need to observe the `theme:load` event to make sure your scripts are executed after the theme is ready.\n */\n$(document).on('theme:init', () => {\n  new ProfileSettingsDemo()\n})\n"]}