{"version":3,"sources":["pages/uploader-demo.js"],"names":["$","url","fileupload","dropZone","dataType","autoUpload","acceptFileTypes","maxFileSize","on","e","data","index","file","files","removeClass","text","error","addClass","progress","parseInt","loaded","total","children","css","result","$img","this","parent","prop","uploadButton","$this","off","abort","submit","always","removeButton","html","parents","remove","doneButton","fadeOut","disableImageResize","test","window","navigator","userAgent","previewMaxWidth","previewMaxHeight","previewCrop","context","prependTo","each","fileName","name","media","append","node","mediaAction","clone","find","figure","figPreview","preview","prepend","length","next","link","attr","wrapInner","support","fileInput","undefined"],"mappings":"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","file":"../../javascript/pages/uploader-demo.min.js","sourcesContent":["// jQuery FIle Upload Demo\n// =============================================================\n$(function () {\n  // Change this to the location of your server-side upload handler:\n  const url = '//jquery-file-upload.appspot.com/'\n  // const url = (window.location.hostname === 'blueimp.github.io') ? '//jquery-file-upload.appspot.com/' : 'server/php/'\n\n  // file upload avatar\n  // =============================================================\n\n  $('#fileupload-avatar').fileupload({\n    url: url,\n    dropZone: null,\n    dataType: 'json',\n    autoUpload: true,\n    acceptFileTypes: /(\\.|\\/)(gif|jpe?g|png)$/i,\n    maxFileSize: 2000000\n  })\n  .on('fileuploadprocessalways', function (e, data) {\n    const index = data.index\n    const file = data.files[index]\n\n    $('#avatar-warning-container')\n      .removeClass('show')\n      .text('')\n\n    if (file.error) {\n      $('#avatar-warning-container')\n        .addClass('show')\n        .text(file.error)\n    }\n  })\n  .on('fileuploadprogressall', function (e, data) {\n    const progress = parseInt(data.loaded / data.total * 100, 10)\n\n    $('#progress-avatar').addClass('show')\n      .children()\n      .css('width', progress + '%')\n  })\n  .on('fileuploaddone', function (e, data) {\n    const file = data.result.files[0]\n    const $img = $(this).parent().children('img')\n    const $old = $img.prop('src')\n\n    if (file.url) {\n      $img.prop('src', file.url)\n    } else if (file.error) {\n      $('#avatar-warning-container')\n        .addClass('show')\n        .text(file.error)\n    }\n\n    $('#progress-avatar').removeClass('show')\n      .children()\n      .css('width', 0)\n  })\n\n\n  // File upload using button\n  // =============================================================\n\n  const uploadButton = $('<button/>')\n    .addClass('btn btn-sm btn-secondary')\n    .prop('disabled', true)\n    .text('Processing...')\n    .on('click', function () {\n      const $this = $(this)\n      const data = $this.data()\n\n      $this.off('click')\n        .text('Abort')\n        .on('click', function () {\n          data.abort()\n        })\n\n      data.submit().always(function () {\n        $('#progress').removeClass('show')\n          .children()\n          .css('width', 0)\n      })\n    })\n\n  const removeButton = $('<button/>')\n    .addClass('btn btn-sm btn-secondary')\n    .html('<i class=\"far fa-trash-alt\"></i>')\n    .on('click', function () {\n      $(this).parents('.list-group-item').remove()\n    })\n\n  const doneButton = $('<button/>')\n    .addClass('btn btn-sm btn-secondary')\n    .text('Done')\n    .on('click', function () {\n      $(this).parents('.list-group-item').fadeOut()\n    })\n\n  $('#fileupload-customInput, #fileupload-btn, #fileupload-dropzone').fileupload({\n    url: url,\n    dropZone: null,\n    dataType: 'json',\n    autoUpload: false,\n    acceptFileTypes: /(\\.|\\/)(gif|jpe?g|png)$/i,\n    maxFileSize: 999000,\n    // Enable image resizing, except for Android and Opera,\n    // which actually support image resizing, but fail to\n    // send Blob objects via XHR requests:\n    disableImageResize: /Android(?!.*Chrome)|Opera/.test(window.navigator.userAgent),\n    previewMaxWidth: 32,\n    previewMaxHeight: 32,\n    previewCrop: true\n  })\n  .on('fileuploadadd', function (e, data) {\n    data.context = $('<div/>')\n      .addClass('list-group-item')\n      .prependTo('#uploadList')\n\n    $.each(data.files, function (index, file) {\n      const fileName = $('<div/>')\n        .addClass('media-body')\n        .text(file.name)\n      const media = $('<div/>')\n        .addClass('media align-items-center')\n        .append(fileName)\n      const node = $('<div/>')\n        .addClass('list-group-item-body')\n        .append(media)\n\n      if (!index) {\n        const mediaAction = $('<div/>')\n          .addClass('media-actions')\n          .append(uploadButton.clone(true).data(data))\n\n        node\n          .find('.media')\n          .append(mediaAction)\n\n      }\n      node.prependTo(data.context)\n    })\n  })\n  .on('fileuploadprocessalways', function (e, data) {\n    const index = data.index\n    const file = data.files[index]\n    const node = $(data.context.children()[index])\n    let figure, figPreview\n\n    if (file.preview) {\n      figure = $('<div/>')\n        .addClass('tile tile-img')\n        .append(file.preview)\n    } else {\n      figure = $('<div />')\n        .addClass('tile bg-danger')\n        .text('NA')\n    }\n\n    figPreview = $('<div/>')\n      .addClass('list-group-item-figure')\n      .append(figure)\n    data.context.prepend(figPreview)\n\n    if (index + 1 === data.files.length) {\n      data.context.find('button')\n        .text('Upload')\n        .prop('disabled', !!data.files.error)\n    }\n\n    if (file.error) {\n      node.append($('<p class=\"list-group-item-text text-red\"/>').text(file.error))\n      node.next().html(removeButton.clone(true))\n    }\n  })\n  .on('fileuploadprogressall', function (e, data) {\n    const progress = parseInt(data.loaded / data.total * 100, 10)\n\n    $('#progress').addClass('show')\n      .children()\n      .css('width', progress + '%')\n  })\n  .on('fileuploaddone', function (e, data) {\n    $.each(data.result.files, function (index, file) {\n      if (file.url) {\n        const link = $('<a>').attr('target', '_blank')\n          .prop('href', file.url)\n\n        data.context.find('.media-body').wrapInner(link)\n\n        data.context\n          .find('.media-actions')\n          .html(doneButton.clone(true))\n      } else if (file.error) {\n        const error = $('<p class=\"list-group-item-text text-red\"/>').text(file.error)\n\n        data.context\n          .find('.media-body')\n          .append(error)\n\n        data.context\n          .find('.media-actions')\n          .html(removeButton.clone(true))\n      }\n    })\n  })\n  .on('fileuploadfail', function (e, data) {\n    $.each(data.files, function (index) {\n      const error = $('<p class=\"list-group-item-text text-red\"/>').text('File upload failed.')\n\n      $(data.context)\n        .find('.media-body')\n        .append(error)\n      data.context\n        .find('.media-actions')\n        .html(removeButton.clone(true))\n    })\n  })\n  .prop('disabled', !$.support.fileInput)\n  .parent()\n  .addClass($.support.fileInput ? undefined : 'disabled')\n\n\n\n  // upload dropzone\n  // =============================================================\n\n  const dropZone = $('#dropzone')\n  $('#fileupload-dropzone').fileupload('option', 'dropZone', dropZone)\n\n  dropZone\n    .on('dragover', function () {\n      dropZone.addClass('hover')\n    })\n    .on('drop dragleave', function () {\n      dropZone.removeClass('hover')\n    })\n})\n"]}